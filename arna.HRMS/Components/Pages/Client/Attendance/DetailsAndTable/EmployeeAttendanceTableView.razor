@using arna.HRMS.Models.ViewModels.Attendance

<div class="attendance-table-wrapper">
        <div class="table-responsive">
            <table class="table align-middle mb-0 custom-table">

            <thead class="table-light sticky-top custom-table-head">
                <tr class="text-uppercase small text-secondary fw-semibold">
                    <th>Date</th>
                    <th>Clock In</th>
                    <th>Clock Out</th>
                    <th>Break</th>
                    <th>Work</th>
                    <th>Total</th>
                    <th>Status</th>
                </tr>
            </thead>

            <tbody class="table-group-divider">

                @foreach (var day in Attendance)
                {
                    var emp = day.Employees.FirstOrDefault();
                    if (emp == null) continue;

                    <tr class="table-row-hover">

                        <td>
                            <div class="fw-semibold">@day.Date.ToString("dd MMM yyyy")</div>
                            <small class="text-muted">@day.Day</small>
                        </td>

                        <td class="text-primary fw-medium">
                            @(emp.ClockIn?.ToString(@"hh\:mm\:ss") ?? "--")
                        </td>

                        <td class="text-primary fw-medium">
                            @(emp.ClockOut?.ToString(@"hh\:mm\:ss") ?? "--")
                        </td>

                        <td>@emp.BreakDuration.ToString(@"hh\:mm\:ss")</td>

                        <td>@emp.WorkingHours.ToString(@"hh\:mm\:ss")</td>

                        <td class="fw-bold">@emp.TotalHours.ToString(@"hh\:mm\:ss")</td>

                        <td>
                            <span class="badge rounded-pill px-3 py-1 @GetStatusClass(emp.Status)">
                                @(emp.Status ?? "—")
                            </span>
                        </td>

                    </tr>
                }

            </tbody>
         </table>
    </div>
</div>


@code {
    [Parameter, EditorRequired]
    public List<MonthlyAttendanceViewModel> Attendance { get; set; } = new();

    private static string GetStatusClass(string? status) => status switch
    {
        "Present" => "badge bg-success",
        "Holiday" => "badge bg-info text-dark",
        "Leave" => "badge bg-warning text-dark",
        "Late" => "badge bg-primary",
        "Absent" => "badge bg-danger",
        _ => "badge bg-secondary"
    };
}
